# 204 选修课 

## 题目描述

现有两门选修课，每门选修课都有一部分学生选修，每个学生都有选修课的成绩，需要你找出同时选修了两门选修课的学生，先按照班级进行划分，班级编号小的先输出，每个班级按照两门选修课成绩和进行降序排序，成绩相同时，按照学生的学号升序排序。

## 输入描述

第1行是第1门选修课学生的成绩，第2行是第2门选修课学生的成绩。每行数据中，学生之间用`;`分隔，每个学生的学号和成绩以`,`分隔，学生学号的格式为8为数字（2位院系编号+入学年份后2位+院系内部1位专业编号+所在班级3位学号），学生成绩的取值范围位[0, 100]之间的整数，两门选修课选修学生数的取值范围位[1,2000]之间的整数。

## 输出描述

同时选修了两门选修课的学生学号，如果没有同时选修两门选修课的学生，输出`NULL`，如果存在，则先按班级划分，班级编号小的先输出，每个班级先输出班级编号（学号前5位），然后另起一行输出这个班级同时选修两门选修课的学生学号，学号按照要求排序（按两门选修课成绩和的降序，成绩和相同时按照学号升序），学生之间以`;`分隔。

## 示例描述

### 示例一

**输入：**
```text
01202021,75;01201033,95;01202008,80;01203006,90;01203088,100
01202008,70;01203088,85;01202111,80;01202021,75;01201100,88
```

**输出：**
```text
01202
01202008;01202021
01203
01203088
```

**说明：**  
同时选修了两门选修课的学生有01202008、01202021、01203088，这三个学生两门选修课的成绩和分别是150、150、185。
- 01202008、01202021属于01202班的学生，按照成绩和降序，成绩相同时按学号升序输出，则结果为01202008;01202021。
- 01203088属于01203班的学生，按照成绩和降序，成绩相同时按学号升序输出，则结果为01203088。
- 01202的班级编号小于01203的班级编号，需要先输出。

### 示例二

**输入：**
```text
01201022,75;01202033,95;01202018,80;01203006,90;01202066,100
01202008,70;01203102,85;01202111,80;01201021,75;01201100,88
```

**输出：**
```text
NULL
```

**说明：**  
没有同时选修了两门选修课的学生，输出`NULL`。

## 解题思路

1. 初始化选修两门课的学生信息字典`choose_two_courses`，key为班级编号，value为(学生学号， 两门课的成绩和)
2. 遍历第2门课，如果学生学号在第1门课中出现过，则设置学生信息字典`choose_two_courses`。
3. 如果字典里面有数据，即存在选修2门课的学生
   - 将字典按照班级编号升序排序。
   - 遍历字典，按照成绩和降序、按照学号升序，将学号保存到结果列表中。
   - 返回结果列表。
4. 如果不存在，则返回`NULL`。

## 解题代码
```python
from collections import defaultdict


def solve_method(course1, course2):
    # 选修两门课的学生信息，key为班级编号，value为(学生学号， 两门课的成绩和)
    choose_two_courses = defaultdict(list)
    for stu, score in course2.items():
        if stu in course1.keys():
            choose_two_courses[stu[:5]].append((stu, score + course1[stu]))

    if len(choose_two_courses) > 0:
        # 按照班级编号升序排序
        sorted(choose_two_courses)
        result = defaultdict(list)
        for key, value in choose_two_courses.items():
            # 按照成绩和降序、按照学号升序
            sorted(value, key=lambda x: (-x[1], int(x[0])))
            # 将学号保存到结果列表中
            result[key].extend([x[0] for x in value])

        return result
    else:
        return "NULL"


if __name__ == '__main__':
    course1 = {"01202021": 75,
               "01201033": 95,
               "01202008": 80,
               "01203006": 90,
               "01203088": 100}
    course2 = {"01202008": 70,
               "01203088": 85,
               "01202111": 80,
               "01202021": 75,
               "01201100": 88}
    assert solve_method(course1, course2) == {"01202": ["01202008", "01202021"], "01203": ["01203088"]}

    course1 = {"01201022": 75,
               "01202033": 95,
               "01202018": 80,
               "01203006": 90,
               "01202066": 100}
    course2 = {"01202008": 70,
               "01203102": 85,
               "01202111": 80,
               "01201021": 75,
               "01201100": 88}
    assert solve_method(course1, course2) == "NULL"
```