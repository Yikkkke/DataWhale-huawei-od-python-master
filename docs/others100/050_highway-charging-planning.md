# 050 高速公路充电技术

## 题目描述

小华购买了一辆续航里程数达1000公里的某自动驾驶新能源车。某一天车辆充满电后，需从甲城出发前往距离`D`公里远的乙城，全程走高速。车载导航提示沿途有`N`个休息站均可提供充电服务，各休息站均可实时提供当前充电排队时间（小时）。请协助规划时间最优的休息站充电方案，返回最短的旅行用时。请协助规划时间最优的休息站充电方案，返回最短的旅行用时。

为方便计算，高速上的行驶速度固定为100公里/小时。规划时可不必考虑保留安全续航里程数，汽车可以将电完全用光，1000公里续航的汽车按100公里/小时，可以开10个小时。每次充电时间固定为1小时，完成后电量充满。各站点充电排队时间不会变化，充电排队过程不耗电。

## 输入描述

第一行是整数`D`，表示甲乙两城的距离，单位为公里。

第二行是整数`N`，表示沿途的休息站数量。

第三行起，每行2个数据，分别表示休息站距离甲城的距离，以及充电排队所需时间（小时）（各休息站按离从近到远排序）。其中 0 <= D <= 1000000，`D`是100的整数倍，0 <= N <= 10000。

## 示例描述

### 示例一

**输入：**
```text
1500
4
300 2
600 1
1000 0
1200 0
```

**输出：**
```text
16
```
**说明**

最佳方案是：只在第3个休息站（位置1000）进行充电，1500公里的行程耗时15小时，充电排队0小时，充电1小时，最快旅程总计花费16小时。

其他方案：
- 在第2个休息站（位置600）进行充电，总计花费17小时。
- 在第2个休息站（位置600）和第4个休息站（位置1200）进行充电，总计花费19小时。

### 示例二

**输入：**

```text
800
2
300 0
600 0
```

**输出：**
```text
8
```

**说明**

最佳方案是：不进任何休息站充电，800公里的行程耗时8小时。

## 解题思路

1. 计算行驶时间`driving_time`。
2. 当要行驶的公里数大于1000公里时，需要充电：
    - 得到当前1000公里内的充电站，并按照充电排队时间从小到大排序。
    - 在最少排队时间的充电站进行充电，并充电1小时，累加到总休息时间`total_rest_time`中。
    - 记录当前已行驶公里路程`pos`。
3. 计算总的行驶时间`total_time`。
4. 返回结果，即行驶全程的耗时。

## 解题代码

```python
def solve_method(D, N, sites):
    # 已行驶公里路程
    pos = 0
    # 行驶时间
    driving_time = D // 100
    # 休息时间
    total_rest_time = 0
    while D > 1000:
        # 当前1000公里内的充电站
        _sites = [x for x in sites if pos <= x[0] <= pos + 1000]
        # 将充电站按照充电排队时间从小到大排序
        _sites = sorted(_sites, key=lambda x: x[1])
        # 进站排队充电
        pos, rest_time = _sites[0]
        # 充电时间
        rest_time += 1
        total_rest_time += rest_time
        D -= pos

    total_time = driving_time + total_rest_time
    return total_time


if __name__ == "__main__":
    sites = [[300, 2],
             [600, 1],
             [1000, 0],
             [1200, 0]]
    assert solve_method(1500, 4, sites) == 16

    sites = [[300, 0],
             [600, 0]]
    assert solve_method(800, 2, sites) == 8
```

