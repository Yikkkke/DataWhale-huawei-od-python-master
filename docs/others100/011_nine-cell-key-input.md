# 011 九宫格按键输入

## 题目描述

九宫格按键输入，有英文和数字两种模式，默认是数字模式，数字模式直接输出数字，英文模式连续按同一个按键会依次出现这个按键上的字母，如果输入`/`或者其他字符，则循环中断，输出此时停留的字母。 

数字和字母的对应关系如下，注意0只对应空格：

```text
1(,.)   2(abc) 3(def)
4(ghi)  5(jkl) 6(mno)
7(pqrs) 8(tuv) 9(wxyz)
#       0(空格) /
```

输入一串按键，要求输出屏幕显示。

注意：
- `#`用于切换模式，默认是数字模式，执行`#`后切换为英文模式。
- `/`表示延迟，例如在英文模式下，输入`22/222`，显示为`bc`,数字模式下`/`没有效果。
- 英文模式下，多次按同一键，例如输入`22222`，显示为`b`。

## 输入描述

输入范围为数字0\~9和字符`#`、`/`，输出屏幕显示，例如：
- 在数字模式下，输入`1234`，显示`1234`。
- 在英文模式下，输入`1234`，显示`adg`。

## 输出描述

输出屏幕显示的字符。

## 示例描述

### 示例一

**输入：**
```text
2222/22
```

**输出：**
```text
222222
```

**说明：**  
默认数字模式，字符直接显示，数字模式下`/`无效。

### 示例二

**输入：**
```text
#2222/22
```

**输出：**
```text
ab
```

**说明：**  
`#`进入英文模式，连续的数字输入会循环选择字母，直至输入`/`，故第一段`2222`输入显示`a`，第二段`22`输入显示`b`。

## 解题思路

1. 遍历按键：
    - 如果是数字模式时，直接将对应数字存入结果字符串中。
    - 如果是英文模式时：
        - 持续按同一个键，记录按键次数。
        - 根据按键次数，把对应的字母存入结果字符串中。
        - 继续下一个按键，继续遍历。
    - 如果是`#`，切换模式。
    - 如果是0，根据模式，将0或空格存入结果字符串中。
2. 返回结果字符串。

## 解题代码

```python
def solve_method(line):
    BUTTON_WORDS = [
        [' '],
        [',', '.'],
        ['a', 'b', 'c'],
        ['d', 'e', 'f'],
        ['g', 'h', 'i'],
        ['j', 'k', '1'],
        ['m', 'n', 'o'],
        ['p', 'q', 'r', 's'],
        ['t', 'u', 'v'],
        ['w', 'x', 'y', 'z']
    ]

    mode_num = True
    result = ""
    i = 0
    while i < len(line):
        ch = line[i]
        if ch.isdigit() and ch != '0':
            if mode_num:
                # 数字模式时，直接输出对应数字
                result += ch
            else:
                pre = ch
                count = 0
                # 持续按同一个键，记录按键次数
                while i < len(line) and pre == line[i]:
                    count += 1
                    i += 1
                num = int(ch)
                button_word = BUTTON_WORDS[num]
                # 根据按键次数，把对应的字母存入结果字符串中
                word = button_word[(count - 1) % len(button_word)]
                result += word
                # 防止按同一个键时，索引i后移了一位
                i -= 1
            # 继续下一个按键
            i += 1
            continue

        if ch == "#":
            # 切换模式
            mode_num = not mode_num
        elif ch == "0":
            # 输出0或空格
            result += "0" if mode_num else " "
        # 继续下一个按键
        i += 1

    return result


if __name__ == '__main__':
    assert solve_method("2222/22") == "222222"
    assert solve_method("#2222/22") == "ab"
```

