# 030 最小施肥机能效

## 题目描述

某农场主管理了一大片果园，`fields[i]`表示不同果林的面积，单位: $m^2$，现在要为所有的果林施肥且必须在`n`天之内完成，否则影响收成。小布是果林的工作人员，他每次选择一片果林进行施肥，且一片果林施肥完后当天不再进行施肥作业。

假设施肥机的能效为`k`，单位: $m^2/\text{day}$，请问至少租赁能效`k`为多少的施肥机才能确保不影响收成？如果无法完成施肥任务，则返回-1。

## 输入描述

第一行输入是`m`和`n`，`m`表示`fields`中的元素个数，`n`表示施肥任务必须在`n`天内（含n天）完成。

第二行输入是`fields`，`fields[i]`表示果林`i`的面积，单位：$m^2$。

## 输出描述

对于每组数据，输出最小施肥机的能效`k`，无多余空格。

## 备注

- 1 <= fields.length <= 10^4
- 1 <= n <= 10^9
- 1 <= fields[i] <= 10^9

## 示例描述

### 示例一

**输入：**

```text
5 7
5 7 9 15 10
```

**输出：**

```text
9
```

**说明：**

当能效`k`为9时，
- `fields[0]`需要1天。
- `fields[1]`需要1天。
- `fields[2]`需要2天。
- `fields[3]`需要2天。
- `fields[4]`需要2天。
共需要7天，不会影响收成。

### 示例二

**输入：**

```text
3 1
2 3 4
```

**输出：**

```text
-1
```

**说明：**

由于一天最多完成一片果林的施肥，无论`k`为多少都至少需要3天才能完成施肥，因此返回-1。

## 解题思路

**基本思路：** 使用二分查找解题。
1. 设置左边界为1，设置右边界为`fields`里面的最大元素。
2. `while`循环开始二分查找：
    - 计算两个边界的中值
    - 统计当前效能所需的天数
    - 如果满足天数，则减小右边界，否则，则增加左边界。
3. 返回右边界的值，即为最小施肥机的能效。    

## 解题代码

```python
def solve_method(n, fields):
    if len(fields) > n:
        return -1

    left = 1
    result = right = max(fields)
    while left <= right:
        m = (left + right) // 2
        # 统计当前效能时，需要的天数
        day = sum(list(map(lambda x: x // m if x % m == 0 else (x // m) + 1, fields)))
        if day <= n:
            right = m - 1
            result = min(result, m)
        else:
            left = m + 1
    return result


if __name__ == '__main__':
    assert solve_method(7, [5, 7, 9, 15, 10]) == 9
    assert solve_method(1, [2, 3, 4]) == -1
```
